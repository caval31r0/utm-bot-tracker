(()=>{const e=document.currentScript,t=e.getAttribute("data-endpoint");if(!t)return console.error("⚠️ data-endpoint não definido no script.");const r=document.getElementById("entrarBtn");r&&r.addEventListener("click",async()=>{const e=new URLSearchParams(window.location.search),o={utm_source:e.get("utm_source")||"",utm_campaign:e.get("utm_campaign")||"",utm_medium:e.get("utm_medium")||"",utm_content:e.get("utm_content")||"",utm_term:e.get("utm_term")||""};try{const e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),t=await e.json();t.telegramLink?window.location.href=t.telegramLink:alert("Erro ao gerar link.")}catch(e){console.error(e),alert("Erro ao conectar com o servidor.")}})})();

(()=>{const s=document.currentScript,d=s.getAttribute("data-endpoint");if(!d)return console.error("⚠️ data-endpoint não definido no script.");const a=document.getElementById("entrarBtn");a&&a.addEventListener("click",async()=>{const t=new URLSearchParams(window.location.search),e={utm_source:t.get("utm_source")||"",utm_campaign:t.get("utm_campaign")||"",utm_medium:t.get("utm_medium")||"",utm_content:t.get("utm_content")||"",utm_term:t.get("utm_term")||""};try{const t=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();n.telegramLink?window.location.href=n.telegramLink:alert("Erro ao gerar link.")}catch(t){console.error(t),alert("Erro ao conectar com o servidor.")}})})();
